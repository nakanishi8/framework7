(function framework7ComponentLoader(e,a){void 0===a&&(a=!0);document,window;var t=e.$,r=(e.Template7,e.utils),n=e.device,o=e.support,s=(e.Class,e.Modal,e.ConstructorMethods,e.ModalMethods,{open:function(e,a){var r;void 0===e&&(e=".card-expandable"),void 0===a&&(a=!0);var n=this;if(!t(".card-opened").length){var s=t(e).eq(0);if(s&&s.length&&!(s.hasClass("card-opened")||s.hasClass("card-opening")||s.hasClass("card-closing"))){var d,c=s.parents(".page").eq(0);if(c.length)if(s.trigger("card:beforeopen",{prevent:K}),n.emit("cardBeforeOpen",s[0],K),!d){var l,i,p,h=s.parents(".page-content");s.attr("data-backdrop-el")&&(l=t(s.attr("data-backdrop-el"))),!l&&n.params.card.backrop&&((l=h.find(".card-backdrop")).length||(l=t('<div class="card-backdrop"></div>'),h.append(l))),n.params.card.hideNavbarOnOpen&&((i=c.children(".navbar")).length||c[0].f7Page&&(i=c[0].f7Page.$navbarEl)),n.params.card.hideToolbarOnOpen&&((p=c.children(".toolbar")).length||(p=c.parents(".view").children(".toolbar")),p.length||(p=c.parents(".views").children(".toolbar")));var f,g=s.css("transform");g&&g.match(/[2-9]/)&&(f=!0);var v=s.children(".card-content"),b=t(document.createElement("div")).addClass("card-expandable-size");s.append(b);var m,u,C=s[0].offsetWidth,x=s[0].offsetHeight,k=c[0].offsetWidth,w=c[0].offsetHeight,O=b[0].offsetWidth||k,T=b[0].offsetHeight||w,E=O/C,H=T/x,M=s.offset(),$=c.offset();if(M.left-=$.left,f){var B=g.replace(/matrix\(|\)/g,"").split(",").map(function(e){return e.trim()});if(B&&B.length>1){var W=parseFloat(B[0]);m=M.left-C*(1-W)/2,u=M.top-$.top-x*(1-W)/2,n.rtl&&(m-=s[0].scrollLeft)}else m=s[0].offsetLeft,u=s[0].offsetTop-(h.length?h[0].scrollTop:0)}else m=M.left,u=M.top-$.top,n.rtl&&(m-=s[0].scrollLeft);u-=(w-T)/2;var q=O-C-(m-=(k-O)/2);n.rtl&&(m=(r=[q,m])[0],q=r[1]);var L,N,P,y,z,X,Y,D,F,I,j,A=T-x-u,G=(q-m)/2,J=(A-u)/2;n.params.card.hideNavbarOnOpen&&i&&i.length&&n.navbar.hide(i,a),n.params.card.hideToolbarOnOpen&&p&&p.length&&n.toolbar.hide(p,a),l&&l.removeClass("card-backdrop-out").addClass("card-backdrop-in"),s.removeClass("card-transitioning"),a&&s.addClass("card-opening"),s.trigger("card:open"),n.emit("cardOpen",s[0]),v.css({width:O+"px",height:T+"px"}).transform("translate3d("+(n.rtl?m+G:-m-G)+"px, 0px, 0) scale("+1/E+", "+1/H+")"),s.transform("translate3d("+G+"px, "+J+"px, 0) scale("+E+", "+H+")"),a?s.transitionEnd(function(){Q()}):Q(),c.addClass("page-with-card-opened"),s[0].detachEventHandlers=function(){n.off("resize",R),o.touch&&n.params.card.swipeToClose&&(n.off("touchstart:passive",S),n.off("touchmove:active",U),n.off("touchend:passive",V))},n.on("resize",R),o.touch&&n.params.card.swipeToClose&&(n.on("touchstart:passive",S),n.on("touchmove:active",U),n.on("touchend:passive",V))}}}function K(){d=!0}function Q(){s.addClass("card-opened"),s.removeClass("card-opening"),s.trigger("card:opened"),n.emit("cardOpened",s[0])}function R(){var e;s.removeClass("card-transitioning"),C=s[0].offsetWidth,x=s[0].offsetHeight,k=c[0].offsetWidth,w=c[0].offsetHeight,O=b[0].offsetWidth||k,T=b[0].offsetHeight||w,E=O/C,H=T/x,s.transform("translate3d(0px, 0px, 0) scale(1)"),M=s.offset(),$=c.offset(),M.left-=$.left,M.top-=$.top,m=M.left-(k-O)/2,n.rtl&&(m-=s[0].scrollLeft),u=M.top-(w-T)/2,q=O-C-m,A=T-x-u,n.rtl&&(m=(e=[q,m])[0],q=e[1]),G=(q-m)/2,J=(A-u)/2,s.transform("translate3d("+G+"px, "+J+"px, 0) scale("+E+", "+H+")"),v.css({width:O+"px",height:T+"px"}).transform("translate3d("+(n.rtl?m+G:-m-G)+"px, 0px, 0) scale("+1/E+", "+1/H+")")}function S(e){t(e.target).closest(s).length&&s.hasClass("card-opened")&&(L=v.scrollTop(),N=!0,y=e.targetTouches[0].pageX,z=e.targetTouches[0].pageY,D=void 0,I=!1,j=!1)}function U(e){if(N){if(X=e.targetTouches[0].pageX,Y=e.targetTouches[0].pageY,void 0===D&&(D=!!(D||Math.abs(Y-z)>Math.abs(X-y))),j||I||(!D&&e.targetTouches[0].clientX<=50?j=!0:I=!0),!j&&!I||I&&0!==L)return N=!0,void(P=!0);P||s.removeClass("card-transitioning"),P=!0,((F=I?Math.max((Y-z)/150,0):Math.max((X-y)/(C/2),0))>0&&I||j)&&(I&&n.device.ios&&(v.css("-webkit-overflow-scrolling","auto"),v.scrollTop(0)),e.preventDefault()),F>1&&(F=Math.pow(F,.3)),F>(I?1.3:1.1)?(N=!1,P=!1,n.card.close(s)):s.transform("translate3d("+G+"px, "+J+"px, 0) scale("+E*(1-.2*F)+", "+H*(1-.2*F)+")")}}function V(){N&&P&&(N=!1,P=!1,n.device.ios&&v.css("-webkit-overflow-scrolling",""),F>=.8?n.card.close(s):s.addClass("card-transitioning").transform("translate3d("+G+"px, "+J+"px, 0) scale("+E+", "+H+")"))}},close:function(e,a){void 0===e&&(e=".card-expandable.card-opened"),void 0===a&&(a=!0);var r=this,o=t(e).eq(0);if(o&&o.length&&o.hasClass("card-opened")&&!o.hasClass("card-opening")&&!o.hasClass("card-closing")){var s,d,c,l=o.children(".card-content"),i=o.parents(".page-content"),p=o.parents(".page").eq(0);if(p.length)o.attr("data-backdrop-el")&&(c=t(o.attr("data-backdrop-el"))),r.params.card.backrop&&(c=o.parents(".page-content").find(".card-backdrop")),r.params.card.hideNavbarOnOpen&&((s=p.children(".navbar")).length||p[0].f7Page&&(s=p[0].f7Page.$navbarEl),s&&s.length&&r.navbar.show(s,a)),r.params.card.hideToolbarOnOpen&&((d=p.children(".toolbar")).length||(d=p.parents(".view").children(".toolbar")),d.length||(d=p.parents(".views").children(".toolbar")),d&&d.length&&r.toolbar.show(d,a)),p.removeClass("page-with-card-opened"),n.ios&&i.length&&(o.parents(".page-content").css("height",i[0].offsetHeight+1+"px"),setTimeout(function(){o.parents(".page-content").css("height","")})),c&&c.length&&c.removeClass("card-backdrop-in").addClass("card-backdrop-out"),o.removeClass("card-opened card-transitioning"),a?o.addClass("card-closing"):o.addClass("card-no-transition"),o.transform(""),o.trigger("card:close"),r.emit("cardClose",o[0]),l.css({width:"",height:""}).transform("").scrollTop(0,a?300:0),a?l.transitionEnd(function(){h()}):h(),o[0].detachEventHandlers&&(o[0].detachEventHandlers(),delete o[0].detachEventHandlers)}function h(){o.removeClass("card-closing card-no-transition"),o.trigger("card:closed"),o.find(".card-expandable-size").remove(),r.emit("cardClosed",o[0])}},toggle:function(e,a){void 0===e&&(e=".card-expandable");var r=t(e).eq(0);r.length&&(r.hasClass("card-opened")?this.card.close(r,a):this.card.open(r,a))}}),d={name:"card",params:{card:{hideNavbarOnOpen:!0,hideToolbarOnOpen:!0,swipeToClose:!0,closeByBackdropClick:!0,backrop:!0}},create:function(){r.extend(this,{card:{open:s.open.bind(this),close:s.close.bind(this),toggle:s.toggle.bind(this)}})},on:{pageBeforeIn:function(e){if(this.params.card.hideNavbarOnOpen&&e.navbarEl&&e.$el.find(".card-opened.card-expandable").length&&this.navbar.hide(e.navbarEl),this.params.card.hideToolbarOnOpen&&e.$el.find(".card-opened.card-expandable").length){var a=e.$el.children(".toolbar");a.length||(a=e.$el.parents(".view").children(".toolbar")),a.length||(a=e.$el.parents(".views").children(".toolbar")),a&&a.length&&this.toolbar.hide(a)}}},clicks:{".card-close":function(e,a){this.card.close(a.card)},".card-open":function(e,a){this.card.open(a.card)},".card-expandable":function(e,a,r){e.hasClass("card-opened")||e.hasClass("card-opening")||e.hasClass("card-closing")||t(r.target).closest(".card-prevent-open").length||this.card.open(e)},".card-backdrop-in":function(){var e=!1;this.params.card.closeByBackdropClick&&(e=!0);var a=t(".card-opened");a.length&&("true"===a.attr("data-close-on-backdrop-click")?e=!0:"false"===a.attr("data-close-on-backdrop-click")&&(e=!1),e&&this.card.close(a))}}};if(a){if(e.prototype.modules&&e.prototype.modules[d.name])return;e.use(d),e.instance&&(e.instance.useModuleParams(d,e.instance.params),e.instance.useModule(d))}return d}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
